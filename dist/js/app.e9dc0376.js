(function(t){function e(e){for(var s,i,r=e[0],c=e[1],u=e[2],p=0,h=[];p<r.length;p++)i=r[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(h.length)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02d7":function(t,e,n){"use strict";n("2d82")},"0552":function(t,e,n){},"096d":function(t,e,n){},"1e13":function(t,e,n){t.exports=n.p+"img/attack.b578ee8b.svg"},"1e95":function(t,e,n){function s(t,e){var n=(new Date).getTime();localStorage.setItem("rpg",t+"::"+e+"::"+n)}function o(){var t=localStorage.getItem("rpg");if(t){var e=t.split("::")[2],n=(new Date).getTime(),s=parseInt(e)+864e5;return s>n&&{token:t.split("::")[0],user:t.split("::")[1]}}}n("ac1f"),n("1276"),t.exports={setToken:s,getToken:o}},"287e":function(t,e,n){},"28e5":function(t,e,n){"use strict";n("4fdc")},"2d36":function(t,e,n){"use strict";n("5c60")},"2d82":function(t,e,n){},3327:function(t,e,n){"use strict";n("a9d4")},4143:function(t,e,n){"use strict";n("84b2")},"4fdc":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Navbar"),n("router-view",{attrs:{socket:t.socket}}),t.warning?n("Warning",{attrs:{warning:t.warning},on:{"close-warning":t.setWarning}}):t._e()],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar"},[n("div",{staticClass:"burger",on:{click:t.toogleMenu}},[n("span"),n("span"),n("span")]),t.activeMenu?n("div",{staticClass:"nav-background",on:{click:function(e){t.activeMenu=!1}}}):t._e(),n("div",{staticClass:"nav-section",class:{visible:t.activeMenu},on:{click:function(e){t.activeMenu=!1}}},[n("ul",[n("li",{on:{click:t.toogleMenu}},[n("router-link",{attrs:{to:"/salas"}},[t._v("Inicio")])],1),"Arena"!=t.currentRoute?n("li",{on:{click:t.toogleMenu}},[n("router-link",{attrs:{to:"/perfil"}},[t._v("Perfil")])],1):t._e(),n("li",[n("Sound")],1)])])])},r=[],c=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sound-controller"},[t.soundState?n("p",{on:{click:t.toggleSound}},[t._v(" Desativar som ")]):n("p",{on:{click:t.toggleSound}},[t._v(" Ativar som ")])])}),u=[],l=n("99d8"),p={data:function(){return{active:!1,current:"menu"}},computed:{soundTheme:function(){return this.$store.state.sound.theme},soundState:function(){return this.$store.state.sound.active}},methods:{toggleSound:function(){this.soundState?this.stop():this.play(this.soundTheme)},play:function(t){this.$store.dispatch("setSoundState",{amount:!0}),l["sounds"][t].play()},stop:function(){this.$store.dispatch("setSoundState",{amount:!1}),Object(l["stopSounds"])()}}},h=p,f=(n("4143"),n("2877")),d=Object(f["a"])(h,c,u,!1,null,"3dbbc180",null),m=d.exports,v={data:function(){return{activeMenu:!1}},components:{Sound:m},computed:{soundState:function(){return this.$store.state.sound.active},currentRoute:function(){return this.$route.name}},methods:{toogleMenu:function(){this.activeMenu=!this.activeMenu}}},g=v,b=(n("8f73"),Object(f["a"])(g,i,r,!1,null,"a38dbf36",null)),k=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"glass warning"},[n("span",{staticClass:"close",on:{click:t.close}},[t._v("×")]),n("p",[t._v(" "+t._s(t.warning)+" ")])])},$=[],x={props:{warning:{type:String,required:!0}},methods:{close:function(){this.$store.dispatch("setWarning",{amount:null}),"Você venceu!!"!=this.$props.warning&&"Você perdeu..."!=this.$props.warning||this.$router.push("salas")}}},C=x,w=(n("f669"),Object(f["a"])(C,_,$,!1,null,"70dd72bb",null)),y=w.exports,S=n("8e27"),O=n.n(S),j={components:{Navbar:k,Warning:y},computed:{warning:function(){return this.$store.state.warning}},data:function(){return{socket:null}},methods:{setWarning:function(){this.warning=null}},mounted:function(){this.socket=O()("https://rpg-socket.herokuapp.com"),this.socket.on("connect",(function(){console.log("Connected")}))}},P=j,T=(n("5c0b"),Object(f["a"])(P,o,a,!1,null,null,null)),E=T.exports,M=n("8c4f"),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"welcome"},[t.hasAccount?n("Login",{staticClass:"container",on:{changeHasAccount:function(e){t.hasAccount=!1}}}):t._e(),t.hasAccount?t._e():n("Sign",{staticClass:"container",on:{changeHasAccount:function(e){t.hasAccount=!0}}})],1)},W=[],H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"form glass m-t--15 is-column container",on:{submit:t.loginAccount}},[n("h2",{staticClass:"text-center f-white m-t-0 f-sans"},[t._v(" Conecte-se ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"user"}],staticClass:"w-100 m-b-8 f-sans",attrs:{type:"text",placeholder:"Insira seu usuário"},domProps:{value:t.user},on:{input:function(e){e.target.composing||(t.user=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],staticClass:"w-100 m-b-8 f-sans",attrs:{type:"password",placeholder:"Insira sua senha"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),n("button",{staticClass:"f-14 f-sans",attrs:{type:"submit"}},[t._v(" Confirmar ")]),n("p",{staticClass:"f-white f-12 f-sans",on:{click:function(e){return t.$emit("changeHasAccount")}}},[t._v(" Não tem uma conta? ")])])},I=[],D=n("bc3a"),V=n.n(D),L=n("1e95"),q={name:"Login",data:function(){return{user:null,pass:null}},methods:{loginAccount:function(t){var e=this;t.preventDefault(),this.user&&this.pass&&(this.$store.dispatch("setWarning",{amount:null}),V.a.post("https://rpg-socket.herokuapp.com/login",{user_name:this.user,user_pass:this.pass}).then((function(t){200==t.status&&(e.$store.dispatch("setWarning",{amount:"Seja bem vindo!"}),Object(L["setToken"])(t.data.token,e.user),e.pass=null,e.$router.push("salas"),e.setPerfil(t.data.perfil))})).catch((function(){e.$store.dispatch("setWarning",{amount:"Usuário não encontrado"})})))},setPerfil:function(t){console.log(t),this.$store.dispatch("setPerfilState",{amount:t})}}},N=q,F=(n("6158"),Object(f["a"])(N,H,I,!1,null,"91a8d0a6",null)),R=F.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"form glass m-t--15 is-column container",on:{submit:t.signAccount}},[n("h2",{staticClass:"text-center f-white m-t-0 f-sans"},[t._v(" Crie uma conta ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"user"}],staticClass:"w-100 m-b-8 f-sans",attrs:{type:"text",placeholder:"Insira seu usuário"},domProps:{value:t.user},on:{input:function(e){e.target.composing||(t.user=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],staticClass:"w-100 m-b-8 f-sans",attrs:{type:"password",placeholder:"Insira sua senha"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),n("button",{staticClass:"f-14 f-sans",attrs:{type:"submit"}},[t._v(" Confirmar ")]),n("p",{staticClass:"f-white f-12 f-sans",on:{click:function(e){return t.$emit("changeHasAccount")}}},[t._v(" Já tem uma conta? ")])])},G=[],J={name:"Sign",data:function(){return{user:null,pass:null}},methods:{signAccount:function(t){var e=this;t.preventDefault(),this.user.length<6?this.$store.dispatch("setWarning",{amount:"O login precisa ter ao menos 6 caracteres"}):this.pass.length<8?this.$store.dispatch("setWarning",{amount:"A senha precisa ter ao menos 8 caracteres"}):(this.$store.dispatch("setWarning",{amount:null}),V.a.post("https://rpg-socket.herokuapp.com/sign",{user_name:this.user,user_pass:this.pass}).then((function(t){200==t.status&&(e.$store.dispatch("setWarning",{amount:t.data}),e.user=null,e.pass=null,e.$emit("changeHasAccount"))})).catch((function(){e.$store.dispatch("setWarning",{amount:"O usuário já existe. Tente outro"})})))}}},K=J,U=(n("2d36"),Object(f["a"])(K,B,G,!1,null,"571ae995",null)),Y=U.exports,z={name:"welcome",components:{Login:R,Sign:Y},data:function(){return{hasAccount:!0}},methods:{loginAccountWithToken:function(t,e){var n=this;V.a.post("https://rpg-socket.herokuapp.com/token_login",{user_name:t,token:e}).then((function(e){200==e.status?(n.$store.dispatch("setWarning",{amount:"Você está conectado"}),Object(L["setToken"])(e.data.token,t),n.$router.push("salas"),n.setPerfil(e.data.perfil)):n.$store.dispatch("setWarning",{amount:"Erro ao conectar. Verifique seus dados e sua conexão e tente novamente"})})).catch((function(t){console.log(t)}))},setPerfil:function(t){console.log(t),this.$store.dispatch("setPerfilState",{amount:t})}},mounted:function(){var t=Object(L["getToken"])();t&&t.token&&t.user&&this.loginAccountWithToken(t.user,t.token)}},X=z,Q=(n("770f"),Object(f["a"])(X,A,W,!1,null,"2b44a929",null)),Z=Q.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-t--15 is-column"},[n("form",{staticClass:"form glass m-0-a text-center is-column container",on:{submit:t.connectRoom}},[n("h2",{staticClass:"f-white m-t-0 f-sans"},[t._v(" Criação de sala ")]),n("p",{staticClass:"f-white f-sans"},[t._v(" Informe o nome da sala que deseja criar, ou informe o nome de uma sala já existente para se conectar. ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.roomID,expression:"roomID"}],attrs:{type:"text",placeholder:"Insira o nome da sala"},domProps:{value:t.roomID},on:{input:function(e){e.target.composing||(t.roomID=e.target.value)}}}),t.error?n("p",{staticClass:"f-warning f-12",domProps:{innerHTML:t._s(t.error)}}):t._e(),n("button",{staticClass:"f-sans",attrs:{type:"submit"}},[t._v(" Confirmar ")]),n("small",{staticClass:"m-t-16 f-white f-12 f-sans"},[t._v(" Este jogo é uma versão de testes e pode apresentar bugs e limitações ")])]),n("button",{staticClass:"f-sans",on:{click:t.logout}},[t._v(" Logout ")])])},et=[],nt={data:function(){return{roomID:null,error:null}},props:{socket:{type:Object}},methods:{connectRoom:function(t){t.preventDefault(),this.roomID?(this.$props.socket.emit("connectRoom",this.roomID),this.$router.push("arena")):this.error="Informe o nome da sala"},logout:function(){localStorage.removeItem("rpg"),this.$router.push("/")}},mounted:function(){this.$store.state.perfil||this.$router.push("/")}},st=nt,ot=(n("c1ad"),Object(f["a"])(st,tt,et,!1,null,"d272e57e",null)),at=ot.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.user&&t.oponnent&&!t.inLoading?t._e():n("Loading"),t.user&&t.oponnent&&!t.inLoading?n("div",[n("div",[n("Header",{attrs:{health:t.oponnent.hp}}),n("OponnentView",{ref:"oponnentView",attrs:{spritesheet:t.oponnent.spritesheet}}),n("Painel",{attrs:{counter:t.counter,console:t.console,active:t.user.active,health:t.user.hp}})],1),t.user.active?n("Controls",{attrs:{active:t.user.active,socket:t.socket},on:{oponnentCounterAttack:t.oponnentCounterAttack,attack:t.attack,useCure:t.useCure,useDefense:t.useDefense}}):t._e()],1):t._e()],1)},rt=[],ct=n("5530"),ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header glass-border"},[n("div",{staticClass:"container m-0-a is-column is-start m-t-16"},[n("h4",{staticClass:"m-y-0 f-white"},[t._v(" Oponente ")]),n("div",{staticClass:"m-y-0 is-flex w-100 m-t-4"},[n("h3",{staticClass:"f-white m-y-0"},[t._v("HP:")]),n("div",{staticClass:"life-bar m-l-8 m-t-2"},[n("span",{style:t.oponnentLife})])])])])},lt=[],pt=(n("99af"),n("a9e3"),{data:function(){return{maxHealth:0}},props:{health:{type:Number,required:!0}},computed:{oponnentLife:function(){var t=this.maxHealth-this.$props.health,e=t/(this.maxHealth/100),n=this.$props.health/(this.$props.health/100)-e;return{width:(this.$props.health<=0?0:n)+"%",backgroundColor:"rgb(".concat(200-this.$props.health,", ").concat(this.$props.health,", 0)")}}},mounted:function(){this.maxHealth=this.$props.health}}),ht=pt,ft=(n("f81d"),Object(f["a"])(ht,ut,lt,!1,null,"590cf2a3",null)),dt=ft.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view is-centered"},[n("canvas",{ref:"canvas",staticClass:"oponnent"})])},vt=[],gt=n("b58c"),bt=n.n(gt),kt={data:function(){return{context:null,image:null,shift:0,frameWidth:381.5,frameHeight:412.5,totalFrames:15,currentFrame:0,speed:60,isDead:!1,canvas:null}},props:{spritesheet:{type:String,required:!0}},methods:{animate:function(){this.context.clearRect(0,0,2*this.frameWidth,2*this.frameHeight),this.context.drawImage(this.image,this.shift,this.canvas.sy,this.canvas.sWidth,this.canvas.sHeight,this.canvas.dx,this.canvas.dy,this.canvas.dWidth,this.canvas.dHeight),this.shift+=this.frameWidth+1,this.currentFrame==this.totalFrames&&(this.shift=0,this.currentFrame=0),this.currentFrame++,0==this.isDead&&setTimeout(this.animate,this.speed)},loadImage:function(){console.log("Ok"),this.animate(),this.image.removeEventListener("load",this.loadImage)}},mounted:function(){this.context=this.$refs.canvas.getContext("2d"),this.image=new Image,this.context.scale(1,.5),this.canvas={sx:this.shift,sy:0,sWidth:500,sHeight:550,dx:10,dy:-30,dWidth:this.frameWidth,dHeight:this.frameHeight},this.image.src=bt.a,this.image.addEventListener("load",this.loadImage,!1),this.animate(),console.log(this.canvas)},watch:{spritesheet:function(t){var e=this;this.shift=0,this.currentFrame=0,this.speed="attack"===t?60:120,this.canvas.sy="default"===t?0:this.canvas.sy="attack"===t?420:this.canvas.sy="hurt"===t?840:this.canvas.sy="died"===t?1260:this.canvas.sy,"died"===t&&setTimeout((function(){e.isDead=!0}),400)}}},_t=kt,$t=(n("02d7"),Object(f["a"])(_t,mt,vt,!1,null,"7564df25",null)),xt=$t.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel glass-border"},[t.active?n("p",{staticClass:"turn text-center"},[t._v(" Seu turno ")]):t._e(),t.active?t._e():n("p",{staticClass:"turn text-center"},[t._v(" Turno do oponente ")]),n("p",{staticClass:"m-0-a p-0 counter text-center",domProps:{innerHTML:t._s(t.counter)}}),n("div",{staticClass:"is-column container m-0-a status is-start"},[n("h4",{staticClass:"m-y-0 f-white"},[t._v(" Usuário ")]),n("div",{staticClass:"m-y-0 p-0 is-flex w-100"},[n("h3",{staticClass:"f-white m-y-0"},[t._v(" HP: ")]),n("div",{staticClass:"life-bar m-l-8 m-t-2"},[n("span",{style:t.userLife})])])]),n("Console",{attrs:{console:t.console}})],1)},wt=[],yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-flex m-t-16 is-end console"},[n("p",{staticClass:"f-white"},[t._v(" "+t._s(t.console)+" ")])])},St=[],Ot={props:{console:{type:String,required:!1}}},jt=Ot,Pt=(n("28e5"),Object(f["a"])(jt,yt,St,!1,null,"5ffb34bf",null)),Tt=Pt.exports,Et={components:{Console:Tt},data:function(){return{maxHealth:0}},props:{console:{type:String,required:!1},counter:{type:Number,required:!1},active:{type:Boolean,required:!1},health:{type:Number,required:!1}},computed:{userLife:function(){var t=this.maxHealth-this.$props.health,e=t/(this.maxHealth/100),n=this.$props.health/(this.$props.health/100)-e;return{width:(this.$props.health<=0?0:n)+"%",backgroundColor:"rgb(".concat(200-this.$props.health,", ").concat(this.$props.health,", 0)")}}},mounted:function(){this.maxHealth=this.$props.health}},Mt=Et,At=(n("b14e"),Object(f["a"])(Mt,Ct,wt,!1,null,"35e61248",null)),Wt=At.exports,Ht=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},It=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading glass m-0-a text-center"},[n("h2",{staticClass:"m-y-16 f-sans"},[t._v(" Aguardando oponente ")]),n("p",{staticClass:"f-sans"},[t._v(" Não se esqueça de "),n("br"),t._v(" enviar o nome da sala que você criou "),n("br"),t._v(" para um amigo")])])}],Dt={},Vt=Dt,Lt=(n("85ea"),Object(f["a"])(Vt,Ht,It,!1,null,"5174f372",null)),qt=Lt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"is-column controls"},[s("img",{attrs:{src:n("1e13"),alt:"Ataque"},on:{click:function(e){return t.$emit("attack")}}}),t.hasPotion?s("img",{attrs:{src:n("9801"),alt:"Itens"},on:{click:function(e){return t.$emit("useCure")}}}):t._e(),s("img",{attrs:{src:n("aa22"),alt:"Defesa"},on:{click:function(e){return t.$emit("useDefense")}}})])},Ft=[],Rt={data:function(){return{hasPotion:!0}},props:{active:{type:Boolean,required:!1},socket:{type:Object}}},Bt=Rt,Gt=(n("3327"),Object(f["a"])(Bt,Nt,Ft,!1,null,"af007266",null)),Jt=Gt.exports,Kt=n("7005"),Ut={components:{Header:dt,OponnentView:xt,Painel:Wt,Loading:qt,Controls:Jt},props:{socket:{type:Object}},data:function(){return{inLoading:!0,inProgress:!1,counter:0,user:{},oponnent:{hp:200,spritesheet:"default"},console:"Você está conectado",sounds:{}}},computed:{perfilState:function(){return this.$store.state.perfil}},methods:{initPlayers:function(t){this.user=Object(ct["a"])(Object(ct["a"])({},this.perfilState),{},{active:!1,blocking:!1,hasPotion:!0}),this.oponnent=Object(ct["a"])(Object(ct["a"])({},t),{},{spritesheet:"default",blocking:!1}),console.log("this.user"),console.log(this.user),console.log("this.oponnent"),console.log(this.oponnent)},startGame:function(){this.oponnent.nv>=this.user.nv&&(this.user.active=!0),this.inProgress=!0,this.inLoading=!1},damage:function(t){var e=this;this.oponnent.spritesheet="attack",this.playSound("attack"),setTimeout((function(){return e.oponnent.spritesheet="default"}),450),this.user.active=!0,this.user.blocking&&-1==t?this.userCounterAttack():(this.user.hp-=t,t>0&&(this.console="Você perdeu ".concat(t," pontos de HP. ")),t>15&&(this.console+=" Ataque crítico!"),t<=0&&(this.console="Você se esquivou do golpe"),this.user.hp<=0&&(this.console="",this.$store.dispatch("setWarning",{amount:"Você perdeu..."}),this.user.hp=0,this.$props.socket.emit("logout")))},oponnentCure:function(t){this.oponnent.hp+=t,this.console="Seu oponente usou uma poção de cura. Ele recuperou ".concat(t," pontos de vida")},oponnentCounterAttack:function(){this.oponnent.blocking=!1,this.user.hp-=this.oponnent.attack,this.console="Seu oponente contra atacou. Você recebeu 20 pontos de dano",this.user.hp<=0&&(this.console="Você perdeu!",this.$store.dispatch("setWarning",{amount:"Você venceu!!"}),this.gotExp(5),this.$props.socket.emit("logout"))},userCounterAttack:function(){this.user.blocking=!1,this.oponnent.hp-=this.user.attack,this.console="Você contra atacou. Seu oponente recebeu 20 pontos de dano"},attack:function(){var t=this;if(this.user.active){var e=Object(Kt["attackEmiter"])(this.$props.socket,this.oponnent.blocking,this.user.attack,this.oponnent.defense);if(-1==e)return this.playSound("blocked"),this.oponnentCounterAttack(),void this.endTurn();0!=e?(this.playSound("attack"),this.oponnent.hp-=e,this.console="Seu golpe causou ".concat(e," de dano"),e>15&&(this.console+="\nAtaque crítico!"),this.oponnent.spritesheet="hurt",setTimeout((function(){t.oponnent.hp<=0?t.oponnent.spritesheet="died":t.oponnent.spritesheet="default"}),700)):(this.playSound("missed"),this.console="Você errou o golpe;"),this.endTurn()}},useCure:function(){if(this.user.hasPotion){this.playSound("item"),this.user.hasPotion=!1;var t=Object(Kt["cureEmitter"])(this.$props.socket,this.user.hp);this.user.hp+=t,this.console="Você usou uma poção de cura e recuperou ".concat(t," pontos de vida"),this.endTurn()}else this.console="Você não tem mais poções"},useDefense:function(){this.user.blocking=!0,this.console="Você se preparou para defender",Object(Kt["defenseEmitter"])(this.$props.socket),this.endTurn()},initiateCount:function(){var t=this;this.counter=3,this.user.blocking=!1,clearInterval(this.turnTimer),this.turnTimer=setInterval((function(){t.counter>0?t.counter--:(clearInterval(t.turnTimer),t.user.active=!1,t.$props.socket.emit("changeTurn"))}),1e3)},endTurn:function(){clearInterval(this.turnTimer),this.oponnent.blocking=!1,this.user.active=!1,this.$props.socket.emit("changeTurn"),this.counter=0},gotExp:function(t){this.$store.dispatch("setExpState",{xp:t})},loadSounds:function(){this.sounds.attack=new Audio("https://media1.vocaroo.com/mp3/13tfsmPUKrOX"),this.sounds.missed=new Audio("https://media1.vocaroo.com/mp3/1e2rY253BKzH"),this.sounds.blocked=new Audio("https://media1.vocaroo.com/mp3/1oBYEk6es0Yi"),this.sounds.item=new Audio("https://media1.vocaroo.com/mp3/16RNLg7yTKVb")},playSound:function(t){this.sounds[t]&&this.$store.state.sound.active&&this.sounds[t].play()}},mounted:function(){var t=this;this.$props.socket?(this.$props.socket.on("dataBinding",(function(){t.$props.socket.emit("sendPlayerData",t.perfilState)})),this.$props.socket.on("startGame",(function(e){t.initPlayers(e),t.startGame(),t.loadSounds()})),this.$props.socket.on("turnOn",(function(){t.user.active=!0,t.initiateCount()})),this.$props.socket.on("damage",(function(e){t.damage(e)})),this.$props.socket.on("oponnentCure",(function(e){t.oponnentCure(e)})),this.$props.socket.on("oponnentDefense",(function(){t.oponnent.blocking=!0,t.console="Seu oponente está preparado para se defender"})),this.$props.socket.on("win",(function(){t.oponnent.hp=0,clearInterval(t.turnTimer),t.$store.dispatch("setWarning",{amount:"Você venceu!!"}),t.gotExp(10)}))):this.$router.push("salas")}},Yt=Ut,zt=Object(f["a"])(Yt,it,rt,!1,null,"eaa66c48",null),Xt=zt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.perfil?n("div",{staticClass:"perfil"},[n("h2",{staticClass:"text-white title m-b-32"},[t._v(" Perfil ")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"text-white"},[t._v(" NV: "+t._s(t.perfil.user_name)+" ")]),n("li",{staticClass:"text-white"},[t._v(" NV: "+t._s(t.perfil.nv)+" ")]),n("li",{staticClass:"text-white"},[t._v(" XP: "+t._s(t.perfil.xp)+" / "+t._s(t.perfil.next)+" ")]),n("li",{staticClass:"text-white"},[t._v(" HP: "+t._s(t.perfil.hp)+" ")]),n("li",{staticClass:"text-white"},[t._v(" Ataque: "+t._s(t.perfil.attack)+" ")]),n("li",{staticClass:"text-white"},[t._v(" Defesa: "+t._s(t.perfil.defence)+" ")]),n("li",{staticClass:"text-white"},[t._v(" Pontos: "+t._s(t.perfil.points)+" ")])])]):t._e()},Zt=[],te={computed:{perfil:function(){return this.$store.state.perfil?this.$store.state.perfil:null}},mounted:function(){this.$store.state.perfil||this.$router.push("/")}},ee=te,ne=(n("7a9b"),Object(f["a"])(ee,Qt,Zt,!1,null,"4655121d",null)),se=ne.exports;s["a"].use(M["a"]);var oe=[{path:"/",name:"Welcome",component:Z},{path:"/salas",name:"RoomCreation",component:at},{path:"/arena",name:"Arena",component:Xt},{path:"/perfil",name:"Perfil",component:se}],ae=new M["a"]({routes:oe}),ie=ae,re=n("2f62");s["a"].use(re["a"]);var ce=new re["a"].Store({state:{warning:null,sound:{active:!1,theme:"default"},perfil:null},mutations:{setPerfilState:function(t,e){t.perfil=e},setExpState:function(t,e){t.perfil.xp+=e;var n=t.perfil.xp>=t.perfil.next;n&&(t.perfil.nv++,t.perfil.xp=t.perfil.xp-t.perfil.next,t.perfil.next=Math.ceil(1.2*t.perfil.next),t.perfil.hp=Math.ceil(1.2*t.perfil.hp),t.perfil.attack=Math.ceil(1.2*t.perfil.attack),t.perfil.defence=Math.ceil(1.2*t.perfil.defence)),V.a.post("https://rpg-socket.herokuapp.com/level_up",{perfil:t.perfil}).then((function(e){200==e.status&&n&&(t.warning=e.data)})).catch((function(){t.warning="Falha ao atualizar seu perfil"}))},setWarning:function(t,e){t.warning=e},setSoundTheme:function(t,e){t.sound.theme=e},setSoundState:function(t,e){t.sound.active=e}},actions:{setPerfilState:function(t,e){var n=t.commit;return n("setPerfilState",e.amount)},setExpState:function(t,e){var n=t.commit;return n("setExpState",e.xp)},setWarning:function(t,e){var n=t.commit;return n("setWarning",e.amount)},setSoundTheme:function(t,e){var n=t.commit;return n("setSoundTheme",e.amount)},setSoundState:function(t,e){var n=t.commit;return n("setSoundState",e.amount)}}});s["a"].config.productionTip=!1,new s["a"]({router:ie,store:ce,render:function(t){return t(E)}}).$mount("#app")},"56ea":function(t,e,n){},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5c60":function(t,e,n){},6158:function(t,e,n){"use strict";n("096d")},7005:function(t,e,n){function s(t,e,n,s){var o=Math.floor(20*Math.random()),a=Number();return a=e?o<=7?-1:o<=12?Math.floor((5*Math.random()+n-s)/2):o<=18?Math.floor((5*Math.random()+10+n-s)/2):Math.floor((10*Math.random()+15+n-s)/2):o<3?0:o<=10?Math.floor(5*Math.random())+n-s:o<=15?Math.floor(5*Math.random())+10+n-s:Math.floor(10*Math.random())+15+n-s,t.emit("attack",a),a}function o(t){var e=Math.floor(20*Math.random())+10;return t.emit("useCure",e),e}function a(t){t.emit("useDefense")}n("a9e3"),t.exports={attackEmiter:s,cureEmitter:o,defenseEmitter:a}},"770f":function(t,e,n){"use strict";n("d5df")},"7a9b":function(t,e,n){"use strict";n("f6ca")},"84b2":function(t,e,n){},"84b3":function(t,e,n){},"85ea":function(t,e,n){"use strict";n("287e")},"8f73":function(t,e,n){"use strict";n("ddc7")},9801:function(t,e,n){t.exports=n.p+"img/itens.55b67201.svg"},"99d8":function(t,e,n){n("4160"),n("b64b"),n("159b");var s={default:new Audio("https://media1.vocaroo.com/mp3/1og1THFGbREk")};function o(){Object.keys(s).forEach((function(t){s[t].pause(),s[t].currentTime=0}))}s.default.loop=!0,s.default.volume=.3,t.exports={sounds:s,stopSounds:o}},"9c0c":function(t,e,n){},a9d4:function(t,e,n){},aa22:function(t,e,n){t.exports=n.p+"img/defense.82329a41.svg"},b14e:function(t,e,n){"use strict";n("84b3")},b58c:function(t,e,n){t.exports=n.p+"img/spritesheet.4514226c.png"},c1ad:function(t,e,n){"use strict";n("56ea")},d5df:function(t,e,n){},ddc7:function(t,e,n){},f669:function(t,e,n){"use strict";n("f7ac")},f6ca:function(t,e,n){},f7ac:function(t,e,n){},f81d:function(t,e,n){"use strict";n("0552")}});
//# sourceMappingURL=app.e9dc0376.js.map